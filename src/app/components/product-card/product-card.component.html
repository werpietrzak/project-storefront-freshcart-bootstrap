<div *ngIf="displayedProduct$ | async as product" class="card card-product">
  <div class="card-body">
    <div class="row align-items-center">
      <div class="col-md-4 col-12">
        <div class="text-center position-relative">
          <img
            [src]="product.imageUrl"
            [alt]="product.name"
            class="mb-3 img-fluid"
          >
        </div>
      </div>
      <div class="col-md-8 col-12 flex-grow-1">
        <div class="text-small mb-1">
          <small>{{product.category}}</small>
        </div>
        <h2 class="fs-6">
          <a href="/" class="text-inherit text-decoration-none">
            {{product.name}}
          </a>
        </h2>
        <div>
          <small class="text-warning">
            <i
              *ngFor="let val of product.ratingStars"
              class="bi"
              [ngClass]="{
                'bi-star-fill': val === 1,
                'bi-star': val === 0,
                'bi-star-half': val > 0 && val < 1
              }"
            ></i>
          </small>
          <span class="text-muted small">
            {{product.ratingValue}}({{product.ratingCount}})
          </span>
        </div>
        <div class="mt-6">
          <div>
            <span class="text-dark">
              {{product.price | currency}}
            </span>
          </div>
        </div>
        <!-- wishlist button -->
        <div class="mt-3">
          <a
            class="btn btn-icon btn-sm btn-outline-gray-400 text-muted"
            data-bs-toggle="tooltip"
            data-bs-html="true"
            aria-label="Wishlist"
            data-bs-original-title="Wishlist"
            aria-describedby="tooltip680637"
            (click)="updateWishlist(product.id)"
          >
            <i
              class="bi"
              [ngClass]="{
                  'bi-heart-fill': product.isWishlisted,
                  'bi-heart': !product.isWishlisted
                }"
            ></i>
          </a>
          <a class="btn btn-primary mx-3" (click)="addToCart(product.id)">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="feather feather-shopping-bag me-2"
            >
              <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path>
              <line x1="3" y1="6" x2="21" y2="6"></line>
              <path d="M16 10a4 4 0 0 1-8 0"></path>
            </svg>
            Add to Cart
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
